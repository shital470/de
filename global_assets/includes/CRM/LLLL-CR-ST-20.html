<!-- my code2 -->

<div class="row justify-content-center">
    <div class="col">
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-lg-6 col-xs-2">
                        
                    </div>
                    <div class="col-lg-6">
                        <a href="#!" class="btn btn-sm btn-primary float-right" style="margin-right: 8px;" id="cancelbtnid">Cancel</a>
                        <a href="#!" class="btn btn-sm btn-primary float-right" style="margin-right: 8px; display: none;" id="deletebtnID">Delete</a>
                        <a href="#!" class="btn btn-sm btn-primary float-right" style="margin-right: 8px; display: none;" id="updatebtnID">Update</a>
                        <a href="#!" class="btn btn-sm btn-primary float-right" style="margin-right:8px;" id="savebtnid">Save</a>
                    </div>
                </div>
            </div>

            <!--Form layout-->

            <div class="card-body">
                <form class="fromcls">
                    <div class="pl-lg-4 abc">

                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group row">
                                    <label class="col-form-label col-lg-4">Task Owner&nbsp;:</label>
                                    <div class="col-lg-6">
                                        <input type="text" class="form-control" id="TaskOwnerId" value="FIT">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group row">
                                    <label class="col-form-label col-lg-4" for="input-PayHeadName">Subject&nbsp;:</label>
                                    <div class="col-lg-6">
                                        <input type="text" class="form-control" id="TaskSubId">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group row">
                                    <label class="col-form-label col-lg-4">Due Date&nbsp;:</label>
                                    <div class="col-lg-6">
                                        <div class="input-group">
                                            <span class="input-group-prepend">
                                                <span class="input-group-text"><i class="icon-calendar22"></i></span>
                                            </span>
                                            <input type="text" class="form-control daterange-single" id="TaskDateId">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6">

                                <div class="form-group row">
                                    <label class="col-form-label col-lg-4" for="input-PayHeadName">Call From To*&nbsp;:</label>
                                    <div class="col-lg-8">
                                        <div class="custom-control custom-switch custom-control-inline">
                                            <input type="radio" class="custom-control-input" name="csr_selector" id="Contactid"  onclick="show1();">
                                            <label class="custom-control-label" for="Contactid">Contact</label>
                                        </div>
                                        <div class="custom-control custom-switch custom-control-inline">
                                            <input type="radio" class="custom-control-input" name="csr_selector" id="LeadId"  onclick="show2();">
                                            <label class="custom-control-label" for="LeadId">Lead</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            


                            <div class="col-lg-6">
                                <div class="form-group row csSelectorShow" id="cs2" style="display: none;">
                                    <label class="col-form-label col-lg-4"> Lead Name&nbsp;:</label>
                                    <div class="col-lg-6">
                                        <select id="TaskLedNameId" class="form-control">


                                            <option>--Select--</option>
                                            <option>Fixed</option>
                                            <option>variable</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row csSelectorShow" id="cs3">
                                    <label class="col-form-label col-lg-4">Contact Name&nbsp;:</label>
                                    <div class="col-lg-6">
                                        <select class="form-control" id="TaskConNameId">
                                            <option value="Select" selected>--Select--</option>

                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group row  " id="cs3">
                                    <label class="col-form-label col-lg-4">Related To&nbsp;:</label>
                                    <div class="col-lg-6">
                                        <select class="form-control" id="RelatedToId" onclick="DropDownSelVal(this)">
                                            <option value="Select" selected>--Select--</option>

                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group row " id="cs4">
                                    <label class="col-form-label col-lg-4">&nbsp;</label>
                                    <div class="col-lg-6">
                                        <select class="form-control" id="RelatedValueId">
                                            <option value="Select" selected>--Select--</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--<div class="row">
        <div class="col-lg-6">

            <div class="form-group row">
                <label class="col-form-label col-lg-4" for="input-PayHeadName">Call From To*&nbsp;:</label>
                <div class="col-lg-8">
                    <div class="custom-control custom-switch custom-control-inline">
                        <input type="radio" class="custom-control-input" name="csr_selector" id="Contactid">
                        <label class="custom-control-label" for="Contactid">Contact</label>
                    </div>
                    <div class="custom-control custom-switch custom-control-inline">
                        <input type="radio" class="custom-control-input" name="csr_selector" id="LeadId">
                        <label class="custom-control-label" for="LeadId">Lead</label>
                    </div>
                </div>
            </div>
        </div>



        <div class="col-lg-6">
            <div class="form-group row csSelectorShow" id="cs2" style="display: none;">
                <label class="col-form-label col-lg-4"> Lead Name&nbsp;:</label>
                <div class="col-lg-6">
                    <select id="TaskLedNameId" class="form-control">


                        <option>--Select--</option>
                        <option>Fixed</option>
                        <option>variable</option>
                    </select>
                </div>
            </div>
            <div class="form-group row csSelectorShow">
                <label class="col-form-label col-lg-4">Contact Name&nbsp;:</label>
                <div class="col-lg-6">
                    <select class="form-control" id="TaskConNameId">
                        <option value="Select" selected>--Select--</option>

                    </select>
                </div>
            </div>
        </div>


        <div class="col-lg-6">
            <div class="form-group row csSelectorShow " id="cs3">
                <label class="col-form-label col-lg-4">Related To&nbsp;:</label>
                <div class="col-lg-6">
                    <select class="form-control" id="RelatedToId" onclick="DropDownSelVal(this)">
                        <option value="Select" selected>--Select--</option>

                    </select>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="form-group row csSelectorShow" id="cs4">
                <label class="col-form-label col-lg-4">&nbsp;</label>
                <div class="col-lg-6">
                    <select class="form-control" id="RelatedValueId">
                        <option value="Select" selected>--Select--</option>
                    </select>
                </div>
            </div>
        </div>
    </div>-->
                     
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group row">
                                    <label class="col-form-label col-lg-4">Status&nbsp;:</label>
                                    <div class="col-lg-6">
                                        <div class="input-group">
                                            <select class="form-control" id="StatusId">
                                                <option>--Select--</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group row">
                                    <label class="col-form-label col-lg-4">Priority&nbsp;</label>
                                    <div class="col-lg-6">
                                        <div class="input-group">
                                            <select class="form-control" id="PriorityId">
                                                <option>--Select--</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group row">
                                    <label class="col-form-label col-lg-4">Recurring Activity&nbsp;:</label>
                                    <div class="form-check form-check-inline form-check-right col-lg-6">
                                        <input type="checkbox" class="form-control" id="RecActivityID" onchange="valueChanged()">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group row">
                                    <label class="col-form-label col-lg-4">Send Notification Email&nbsp;:</label>
                                    <div class="form-check form-check-inline form-check-right col-lg-6">
                                        <input type="checkbox" class="form-control" id="SendNoEmailID">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="autoUpdate" class="autoUpdate" style="display:none;">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="form-group row">
                                        <label class="col-form-label col-lg-4">Start Date&nbsp;:</label>
                                        <div class="col-lg-6">
                                            <div class="input-group">
                                                <span class="input-group-prepend">
                                                    <span class="input-group-text"><i class="icon-calendar22"></i></span>
                                                </span>
                                                <input type="text" class="form-control daterange-single" id="RecActStartdateId">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group row">
                                        <label class="col-form-label col-lg-4">End Date&nbsp;</label>
                                        <div class="col-lg-6">
                                            <div class="input-group">
                                                <span class="input-group-prepend">
                                                    <span class="input-group-text"><i class="icon-calendar22"></i></span>
                                                </span>
                                                <input type="text" class="form-control daterange-single" id="RecActEnddateId">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="form-group row">
                                        <label class="col-form-label col-lg-4">Repeat Type&nbsp;:</label>
                                        <div class="col-lg-6">
                                            <div class="input-group">
                                                <select class="form-control" onchange="myFunction(this)" id="RepeattypeId">
                                                    <option value="0">None</option>
                                                    <option value="1">Daily</option>
                                                    <option value="2">Weekly</option>
                                                    <option value="3">Monthly</option>
                                                    <option value="4">Yearly</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="EveryDayId" style="display: none;">
                                <div class="row">
                                    <div class="col-lg-6 offset-2">
                                        <div class="form-group">
                                            <input type="radio" class="radio-inline" id="REveryDayId" name="Daily">
                                            <label class="col-form-label" for="input-PayHeadName"> Every Day</label>

                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6 offset-2" style="padding-right:0px;">
                                        <div class="form-group">
                                            <input type="radio" id="RExactDayId" name="Daily">
                                            <label class="col-form-label"> Repeat for every</label>
                                            <input type="text" class="CrmClass" id="DailyDate">
                                            <label class="col-form-label">days</label>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="row" id="weeklyId" style="display: none;">

                                <div class="col-lg-6 offset-2">
                                    <div class="form-group">
                                        <label class="col-form-label" for="input-PayHeadName">
                                            Repeat for every
                                        </label>
                                        <input type="text" class="CrmClass" id="RepForWeek">
                                        <label class="col-form-label" for="input-PayHeadName">
                                            Week
                                        </label>

                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-8 offset-2">
                                        <input type="checkbox" id="CheckSunId">
                                        <label class="col-form-label">  Sunday</label>
                                        <input type="checkbox" id="CheckMonId">
                                        <label class="col-form-label">  Monday</label>
                                        <input type="checkbox" id="CheckTueId">
                                        <label class="col-form-label">  Tuesday</label>
                                        <input type="checkbox" id="CheckWenId">
                                        <label class="col-form-label">  Wednesday</label>
                                        <input type="checkbox" id="CheckThrId">
                                        <label class="col-form-label">  Thursday</label>
                                        <input type="checkbox" id="CheckFriId">
                                        <label class="col-form-label">  Friday</label>
                                        <input type="checkbox" id="CheckSatId">
                                        <label class="col-form-label">  Saturday</label>
                                    </div>
                                </div>
                            </div>

                            <div id="MontlyId" style="display:none;">
                                <div class="row">
                                    <div class="col-lg-10 offset-2" style="padding-right:0px;">
                                        <div class="form-group">
                                            <input type="radio" id="dateOfMonId">
                                            <label class="col-form-label"> On</label>
                                            <select class="CrmClass 1-31" id="SeldateOfMon">
                                                <option></option>

                                            </select>

                                            <label class="col-form-label">of every</label>
                                            <input type="text" class="CrmClass" id="dayOfMon">
                                            <label class="col-form-label">Months</label>
                                        </div>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-lg-10 offset-2" style="padding-right:0px;">
                                        <div class="form-group">
                                            <input type="radio" id="dayofMonthId">
                                            <label class="col-form-label"> On</label>
                                            <select class="CrmClass" id="SelweekOfMon">
                                                <option>First</option>
                                                <option>Second</option>
                                                <option>Third</option>
                                                <option>Fourth</option>
                                                <option>Last</option>
                                            </select>
                                            <select class="CrmClass fa-calendar-day" id="SelWeekDayOfMon">
                                                <option value="SUN">Sunday</option>
                                                <option value="MON">Monday</option>
                                                <option value="TUE">Tuesday</option>
                                                <option value="WED">Wednesday</option>
                                                <option value="THUR">Thursday</option>
                                                <option value="FRI">Friday</option>
                                                <option value="SAT">Saturday</option>
                                            </select>
                                            <label class="col-form-label">of every</label>
                                            <input type="text" class="CrmClass" id="WeekofMon">
                                            <label class="col-form-label">Months</label>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="row" id="YearId" style="display: none; ">
                                <div class="row" style="margin-left:0px;">
                                    <div class="col-lg-10 offset-2" style="padding-right:0px;">
                                        <div class="form-group">
                                            <input type="radio" id="dateofYearId">
                                            <label class="col-form-label"> Of every</label>
                                            <select class="CrmClass" id="SelMonOfyear">
                                                <option>January</option>
                                                <option>February</option>
                                                <option>March</option>
                                                <option>April</option>
                                                <option>May</option>
                                                <option>June</option>
                                                <option>July</option>
                                                <option>August</option>
                                                <option>September</option>
                                                <option>October</option>
                                                <option>November</option>
                                                <option>December</option>
                                            </select>
                                            <select class="CrmClass 1-31" id="SelDayOfyear">
                                                <option></option>

                                            </select>


                                        </div>
                                    </div>

                                </div>

                                <div class="row" style="margin-left:0px;">
                                    <div class="col-lg-10 offset-2" style="padding-right:0px;">
                                        <div class="form-group">
                                            <input type="radio" id="dayofYearId">
                                            <label class="col-form-label"> On</label>
                                            <select class="CrmClass" id="SeldaysOfyear">
                                                <option>First</option>
                                                <option>Second</option>
                                                <option>Third</option>
                                                <option>Fourth</option>
                                                <option>Last</option>
                                            </select>
                                            <select class="CrmClass fa-calendar-day" id="SeldayOfyear">
                                                <option value="SUN">Sunday</option>
                                                <option value="MON">Monday</option>
                                                <option value="TUE">Tuesday</option>
                                                <option value="WED">Wednesday</option>
                                                <option value="THUR">Thursday</option>
                                                <option value="FRI">Friday</option>
                                                <option value="SAT">Saturday</option>
                                            </select>

                                            <select class="CrmClass month" id="monthId1">
                                                <option>January</option>
                                                <option>February</option>
                                                <option>March</option>
                                                <option>April</option>
                                                <option>May</option>
                                                <option>June</option>
                                                <option>July</option>
                                                <option>August</option>
                                                <option>September</option>
                                                <option>October</option>
                                                <option>November</option>
                                                <option>December</option>

                                            </select>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group row">
                                    <label class="col-form-label col-lg-4">Description&nbsp;:</label>
                                    <div class="col-lg-6">
                                        <textarea class="form-control" style="resize:none" id="TaskDesc"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </form>
            </div>
        </div>
    </div>
</div>




<!--<script src="../assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="../assets/vendor/js-cookie/js.cookie.js"></script>
<script src="../assets/vendor/jquery.scrollbar/jquery.scrollbar.min.js"></script>
<script src="../assets/vendor/jquery-scroll-lock/dist/jquery-scrollLock.min.js"></script>-->
<!-- Argon JS -->
<!--<script src="../assets/js/argon.js?v=1.2.0"></script>
<script src="../assets/vendor/jquery/dist/jquery.min.js"></script>-->

<!-- Argon Scripts -->
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>-->

<!--model link-->

<!--<script src="../Model/CrmContact.js" type="text/javascript"></script>-->


<!--net salary javascript-->
<!--checkbox hide show div-->
<!--checkbox hide show div-->

<script>
    $(document).ready(function () {

        set_MainHeaderName();

    });</script>
<script>
    function valueChanged() {
        if ($('#RecActivityID').is(":checked"))
            $(".autoUpdate").show();
        else
            $(".autoUpdate").hide();
    }
</script>
<script>
    function myFunction(element) {
        document.getElementById('EveryDayId').style.display = element.value == 1 ? 'block' : 'none';
        document.getElementById('weeklyId').style.display = element.value == 2 ? 'block' : 'none';
        document.getElementById('MontlyId').style.display = element.value == 3 ? 'block' : 'none';
        document.getElementById('YearId').style.display = element.value == 4 ? 'block' : 'none';
    }
</script>


<script>
    $(document).ready(function () {
        $('#checkbox1').change(function () {
            $('#autoUpdate').fadeToggle();
        });
    });
</script>

<!--<script>
    function set_MainHeaderName() {
        $('#MainPHead_Name').html('<i class="icon-arrow-left52 mr-2"></i> <span class="font-weight-semibold" id="main_id">CRM</span> Activities-Schedule Task');
        $('#MainPHead_Name1').html('<a href="#" class="breadcrumb-item"><i class="icon-home2 mr-2"></i>CRM</a><span class="breadcrumb-item active">Activities-Schedule Task</span>');
    };
</script>-->
<!--<script>
    const cars = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

     let text = "";
    for (let i = 0; i < cars.length; i++) {
        text += cars[i] + "<br>";
    }
    $('#monthId1').append('<option>' + text+"<br>" + '</option>');
</script>-->
<script>
    function RepeatType() {
        //alert("oncghhjAyhjug")
        //debugger
        //document.getElementById('EveryDayId').style.display = element.value == 1 ? 'none' : 'block';
        //document.getElementById('weeklyId').style.display = element.value == 2 ? 'block' : 'none';
        //document.getElementById('MontlyId').style.display = element.value == 3 ? 'block' : 'none';
        //document.getElementById('YearId').style.display = element.value == 4 ? 'block' : 'none';
        //function ShowSpouse(element)

</script>

<!--<script>
    $('[name=csr_selector]').change(function () {
        $('.csSelectorShow').each(function () {
            $(this).toggle();
        });
    });
</script>-->
<script>
        function show2() {
            $("#cs2").show();
            $("#cs3").hide();
            //$('#cs2').each(function () {
            //    /* $(this).toggle();*/
            //    $("#cs2").show();
            //    $("#cs3").hide();

            //});
        }
        function show1() {


            var abc = document.getElementById("cs3")
            if ("abc==hide") {
                $("#cs3").show();
                $("#cs2").hide();
            }


        }
</script>
<script>
    $(function () {
        debugger
        var $select = $(".1-31");
        for (i = 1; i <= 31; i++) {
            $select.append($('<option></option>').val(i).html(i))
        }

    });
</script>




<!--sidebar code-->
<script>
    $(document).ready(function () {

        $('#content').load("Sidebar.html");

    });</script>
<!--dropdown list-->
<!--dropdown list-->

<script type="text/javascript">
    $(function () {
        debugger

        GetParameterType('SRS');

        GetParameterType('STA');
        GetParameterType('PRI');
    });
    //create first function for getparameretertypeid
    function GetParameterType(parametertype) {
        debugger
        //alert("parametertype1" + parametertype);
        var cccd = localStorage.getItem('CCAC');
        $.ajax({
            async: false,
            type: "GET",
            url: URLPowerAPI+'/api/PBXMLParameter/GetParameterTypeID',
            dataType: "json",
            contentType: "application/json",
            data: {
                PARTYPE: parametertype,
                cccd: cccd
            },

            success: function (res) {
                // alert(JSON.stringify(res + "code"));
                var abc = res;
                //alert(JSON.stringify(abc));
                // alert(parametertype + "2nd");
                GetDropDown(abc, parametertype);

            }

        });
    }


    //second function for dropdown
    function GetDropDown(parameter, parametertype) {
        debugger


        var cccd = localStorage.getItem('CCAC');
        $.ajax({
            async: false,
            type: "GET",
            url: URLPowerAPI +'/api/PBXMLParametercode/GetAllActiveParameterCodes',
            dataType: "json",
            contentType: "application/json",

            data: {
                PARTYPEID: parameter,
                cccd: cccd
            },

            success: function (res) {
                var related2 = [];
                var relatedto;
                $.each(res, function (data, value) {


                    if (parametertype == 'STA') {
                        $("#StatusId").append($("<option></option>").val(value.ParCodeID).html(value.ParCodeDescription));
                    }
                    else if (parametertype == 'PRI') {
                        $("#PriorityId").append($("<option></option>").val(value.ParCodeID).html(value.ParCodeDescription));
                    }

                    else if (parametertype == 'SRS') {
                        $("#RelatedToId").append($("<option></option>").val(value.ParCodeID).html(value.ParCodeDescription));
                        relatedto = value.ParCodeDescription;
                        // alert(relatedto + "RelatedToooo");
                        related2.push(relatedto);
                    }
                })
            }

        });
    }
    $(document).ready(function () {
        $("#RelatedToId").change(function () {
            debugger

            var relatedval = $("#RelatedToId option:selected").text();
            var cccd = localStorage.getItem('CCAC');
            if (relatedval == "Account") {
                $("#RelatedValueId").html("");
                $.ajax({

                    url: URLPowerAPI +'/api/PBXMLAccounts/GetAllCustomer',
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json ; charset = utf-8',
                    data: {
                        cccd: cccd
                    },

                    success: function (res) {

                        $.each(res, function (index, value) {
                            $("#RelatedValueId").append($("<option></option>").val(value.ClId).html(value.Name));
                        });

                    }

                });

            }
            else if (relatedval == "Campaign") {
                $("#RelatedValueId").html("");
                $.ajax({

                    url: URLPowerAPI+'/api/PBXMLVCampaign/GetAllPBXMLCampaign',
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json ; charset = utf-8',
                    data: {
                        cccd: cccd
                    },

                    success: function (res) {

                        $.each(res, function (index, value) {
                            $("#RelatedValueId").append($("<option></option>").val(value.CampaignNo).html(value.CampaignName));
                        });

                    }

                });

            } else if (relatedval == "Case") {

                $("#RelatedValueId").html("");
                $.ajax({

                    url: URLPowerAPI+'/api/PBXMLVCase/GetAllPBXMLCase',
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json ; charset = utf-8',
                    data: {
                        cccd: cccd
                    },

                    success: function (res) {

                        $.each(res, function (index, value) {
                            $("#RelatedValueId").append($("<option></option>").val(value.CaseNo).html(value.Subject));
                        });

                    }

                });
            }
            else if (relatedval == "Contact") {
                $("#RelatedValueId").html("");
                $.ajax({

                    url: URLPowerAPI+'/api/PBXMLVContact/GetAllPBXMLContacts',
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json ; charset = utf-8',
                    data: {
                        cccd: cccd
                    },

                    success: function (res) {

                        $.each(res, function (index, value) {
                            $("#RelatedValueId").append($("<option></option>").val(value.ContactNo).html(value.FirstName));
                        });

                    }

                });
            }
            else if (relatedval == "Lead") {
                $("#RelatedValueId").html("");
                $.ajax({

                    url: URLPowerAPI+'/api/PBXMLVLead/GetAllPBXMLLead',
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json ; charset = utf-8',
                    data: {
                        cccd: cccd
                    },

                    success: function (res) {

                        $.each(res, function (index, value) {
                            $("#RelatedValueId").append($("<option></option>").val(value.LeadNo).html(value.FirstName));
                        });

                    }

                });
            }
            else if (relatedval == "Opportunity") {
                $("#RelatedValueId").html("");
                $.ajax({

                    url: URLPowerAPI+'/api/PBXMLVOpportunity/GetAllPBXMLOpportunity',
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json ; charset = utf-8',
                    data: {
                        cccd: cccd
                    },

                    success: function (res) {

                        $.each(res, function (index, value) {
                            $("#RelatedValueId").append($("<option></option>").val(value.OppNo).html(value.OppName));
                        });

                    }

                });
            }
            else if (relatedval == "Potential") {
                $("#RelatedValueId").html("");
                $.ajax({

                    url: URLPowerAPI+'/api/PBXMLVPotential/GetAllPBXMLPotential',
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json ; charset = utf-8',
                    data: {
                        cccd: cccd
                    },

                    success: function (res) {

                        $.each(res, function (index, value) {
                            $("#RelatedValueId").append($("<option></option>").val(value.PotentialNo).html(value.PotentialName));
                        });

                    }

                });
            }
            else if (relatedval == "Product") {
                $("#RelatedValueId").html("");
                $.ajax({

                    url: URLPowerAPI+'/api/PBXMLVStockGroups/GetAllPBXMLVStockGroup',
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json ; charset = utf-8',
                    data: {
                        cccd: cccd
                    },

                    success: function (res) {

                        $.each(res, function (index, value) {
                            $("#RelatedValueId").append($("<option></option>").val(value.Itcd).html(value.STOCKGROUP));
                        });

                    }

                });
            }
        });

    });
</script>


<script type="text/javascript">
    $(function () {
        debugger
        var cccd = localStorage.getItem('CCAC');

        $.ajax
            ({

                url: URLPowerAPI+'/api/PBXMLVContact/GetAllPBXMLContacts',
                type: 'GET',
                dataType: 'json',
                contentType: 'application/json ; charset = utf-8',
                data:
                {
                    cccd: cccd
                },
                success: function (res) {
                    $.each(res, function (index, value) {
                        $("#TaskConNameId").append($("<option></option>").val(value.ContactNo).html(value.FirstName));

                    });
                }
            });

    });



</script>

<script type="text/javascript">
    $(function () {
        debugger
        var cccd = localStorage.getItem('CCAC');

        $.ajax
            ({

                url: URLPowerAPI+'/api/PBXMLVLead/GetAllPBXMLLead',
                type: 'GET',
                dataType: 'json',
                contentType: 'application/json ; charset = utf-8',
                data:
                {
                    cccd: cccd
                },
                success: function (res) {
                    $.each(res, function (index, value) {
                        $("#TaskLedNameId").append($("<option></option>").val(value.LeadNo).html(value.FirstName));

                    });
                }
            });

    });



</script>
<script type="text/javascript">
    $(function () {
        debugger
        var cccd = localStorage.getItem('CCAC');

        $.ajax
            ({

                url: URLPowerAPI+'/api/PBXMLAccounts/GetAllCustomer',
                type: 'GET',
                dataType: 'json',
                contentType: 'application/json ; charset = utf-8',
                data:
                {
                    cccd: cccd

                },

                success: function (res) {


                    $.each(res, function (index, value) {
                        $("#PayHeadUseOfGratuityId").append($("<option></option>").val(value.ClId).html(value.Name));




                    });
                }

            });

    });



</script>

<!--add edit code-->
<!--<script>
    $(document).ready(function () {
        debugger
        // we define and invoke a function
        (function () {
            console.log('payheadfunction!');
        })();
    });
</script>-->

<script>
    function payheadfunction() {
        debugger
        var url1 = window.location.href;
        var arr = url1.split('=');
        console.log(url1.length)

        if (arr.length > 1) {
            var mode = url1.split("=")[2];
            var ActivityNo1 = url1.split("=")[1];
            var index = (ActivityNo1).indexOf('&');
            var ActivityNo = ActivityNo1.substring(0, index);

        }

        var cccd = localStorage.getItem('CCAC');
        var RecActStartdate1 = $("#RecActStartdateId").val();

        var mon = RecActStartdate1.substring(0, 2);
        var day = RecActStartdate1.split("/")[1];
        var year = RecActStartdate1.split("/")[2];
        var RecActStartdate = year + "-" + mon + "-" + day;

        var RecActEnddate1 = $("#RecActEnddateId").val();
        var mon = RecActEnddate1.substring(0, 2);
        var day = RecActEnddate1.split("/")[1];
        var year = RecActEnddate1.split("/")[2];
        var RecActEnddate = year + "-" + mon + "-" + day;
        //   alert(RecActEnddate + "RecActEnddate");
        var DailyDate = $("#DailyDate").val();

        var dateOfMon = $('#SeldateOfMon option:selected').val();
        var dayOfMon = $("#dayOfMon").val();
        var SelweekOfMon = $('#SelweekOfMon option:selected').val();
        var weekDayOfMon = $('#SelWeekDayOfMon option:selected').val();
        var weekofMon = $("#WeekofMon").val();
        var RepForWeek = $("#RepForWeek").val();

        var SelDayOfyear = $('#SelDayOfyear option:selected').val();
        var SelDayOfyear = $('#SelDayOfyear option:selected').val();

        var SeldaysOfyear = $('#SeldaysOfyear option:selected').val();
        var SeldayOfyear = $('#SeldayOfyear option:selected').val();
        var monthId1 = $('#monthId1 option:selected').val();

        var target = $('#RepeattypeId option:selected').val();
        // alert("tabghjgj" + target)
        if ($('#RecActivityID').is(":checked")) {

            //var  RecurringActivity = "True";
            if (target == "0") {
                RecurringActivity = " ";
            }
            else if (target == "1") {
                if (REveryDayId.Checked) {
                    RecurringActivity = "Recurring activity that repeats every day from " + RecActStartdate + " to " + RecActEnddate;
                }
                else {
                    RecurringActivity = "Recurring activity that repeats for every " + DailyDate + " from " + RecActStartdate + " to " + RecActEnddate;
                }
            }
            else if (target == "2") {
                var temp = ""

                if ($('#CheckSunId').is(':checked')) {
                    temp = temp + " Sunday ";
                }
                if ($('#CheckMonId').is(':checked')) { temp = temp + " Monday "; }
                if ($('#CheckTueId').is(':checked')) { temp = temp + " Tuesday "; }
                if ($('#CheckWenId').is(':checked')) { temp = temp + " Wednesday "; }
                if ($('#CheckThrId').is(':checked')) { temp = temp + " Thursday "; }
                if ($('#CheckFriId').is(':checked')) { temp = temp + " Friday "; }
                if ($('#CheckSatId').is(':checked')) { temp = temp + " Saturday "; }
                RecurringActivity = "Recurring activity repeats on " + temp + " from " + RecActStartdate + " to " + RecActEnddate + " for every " + RepForWeek + " week(s)";
            }

            else if (target == "3") {
                if (dateOfMonId.Checked) {
                    RecurringActivity = "Recurring activity that repeats on day " + dateOfMon + " of every " + dayOfMon + " month(s)  from " + RecActStartdate + " to " + RecActEnddate;
                }
                else {
                    RecurringActivity = "Recurring activity that repeats on every " + SelweekOfMon + " " + weekDayOfMon + " of every " + weekofMon + " month(s)  from " + RecActStartdate + " to " + RecActEnddate;
                }
            }
            else if (target == "4") {
                if (dateofYearId.Checked) {
                    RecurringActivity = "Recurring activity that repeats every year on " + SelDayOfyear + " " + SelDayOfyear + " from " + RecActStartdate + " to " + RecActEnddate;
                }
                else {
                    RecurringActivity = "Recurring activity that repeats every year on " + SeldaysOfyear + " " + SeldayOfyear + " of " + monthId1 + " from " + RecActStartdate + " to " + RecActEnddate;
                }
            }
        }
        else RecurringActivity = "False";



        if ($('#SendNoEmailID').is(":checked")) {
            var SendNoficatnEmail = "True"
        }
        else {
            var SendNoficatnEmail = "False"
        }

        var DueDate1 = $("#TaskDateId").val();
        var mon = DueDate1.substring(0, 2);
        var day = DueDate1.split("/")[1];
        var year = DueDate1.split("/")[2];
        var DueDate2 = year + "-" + mon + "-" + day;

   

        var DueDate = DueDate2 + "T" + "00:00:00";


        var ContactPersonName = $("#TaskConNameId option:selected").text();
        var ContactName = $("#TaskConNameId option:selected").val();
        var ContactLead = $("#TaskLedNameId option:selected").text();
        //  var caltype = $("#TaskLedNameId option:selected").text();
        var AccountOptionName = $("#RelatedToId option:selected").text();
        var AccountOption = $("#RelatedToId option:selected").val();

        var RelatedToName = $("#RelatedValueId option:selected").text();
        var RelatedTo = $("#RelatedValueId option:selected").val();
        var StatusName = $("#StatusId option:selected").text();
        // alert(StatusName + "StatusName");
        var Status = $("#StatusId option:selected").val();
        var PriorityName = $("#PriorityId option:selected").text();
        var Priority = $("#PriorityId option:selected").val();
        // var checkedValue = $('.checkbox1:checked').val();
        var CurrentDate = new Date();
        var curndate = CurrentDate.toISOString().replace('Z', '');

        var status = "A";


        //storesession value
        var UId;
        var Username;
        var Createdsystem;
        var Createdate;

        if (mode == 'edit') {
            ActivityNo = ActivityNo,
            UId = sessionStorage.getItem('uid');
            Username = sessionStorage.getItem('username');
            Createdsystem = sessionStorage.getItem('createdsystem');
            Createdate = curndate;
        }
        else {
            ActivityNo = localStorage.getItem('MaxActivityNo');
            UId = localStorage.getItem('UID');
            Username = localStorage.getItem('UName');
            Createdsystem = 'PowerSuit';
            Createdate = curndate;
        }
        var StartDateTime = RecActStartdate + "T" + "00:00:00";
        var EndDateTime = RecActEnddate + "T" + "00:00:00";

        //if ($('#RecActivityID').is(':checked')) {
        //    var StartDateTime = RecActStartdate + "T" + "00:00:00";
        //    var EndDateTime = RecActEnddate + "T" + "00:00:00";
        //    // alert("EndDateTimefgggfgfgffdfe" + EndDateTime);
        //}
        //else {
        //    var StartDateTime = curndate;
        //    var EndDateTime = curndate;
        //}

        var parameter = {
            ActivityOwnerName: Username,
            ActivityOwner: UId,
            ActivityNo: ActivityNo,
            ActivityType: 'Task',
            Subject: $("#TaskSubId").val(),
            DueDate: DueDate,
            RESERVEDNAME: $("#PayHeadNameId").val(),
            NAME: $("#PayHeadNameId").val(),
            PAYSLIPNAME: $("#PayslipNameId").val(),
            ContactPersonName: ContactPersonName,
            RecurringActivity: RecurringActivity,
            ContactName: ContactName,
            ContactLead: ContactLead,
            RelatedToName: RelatedToName,
            RelatedTo: RelatedTo,
            AccountOption: AccountOption,
            AccountOptionName: AccountOptionName,
            StatusName: StatusName,
            Status: Status,
            PriorityName: PriorityName,
            Priority: Priority,
            SendNoficatnEmail: SendNoficatnEmail,
            StartDateTime: StartDateTime,
            EndDateTime: EndDateTime,
            CallStartTime: StartDateTime,
            Description:$("#TaskDesc").val(),
            CREATEDSYSTEM: 'PowerBooksCRM',
            LASTUPDATEDSYSTEM: 'PowerBooksCRM',
            Venue: "",
            CallType: "",
            CallPurpose: "",
            CallResult: "",
            Billable: "",
            CCCD: cccd,
            STATUS: status,
            LASTUPDATEDSYSTEM: 'PowerSuit',
            UID: UId,
            USERNAME: Username,
            LUID: localStorage.getItem('UID'),
            LUSERNAME: localStorage.getItem('UName'),
            CREATEDDATE: Createdate,
            CreatedDate: Createdate,
            LASTUPDATEDDATE: Createdate,
            CreatedBy: UId,
            LastUpdatedBy: '65',
            SFID: "",
            SFXMLVAR: 'SFXMLVAR'
        }
        return parameter
    }
    $("#savebtnid").click(function () {

        // alert("ghggg");
        var addpayheadparameter = payheadfunction();
        localStorage.setItem("addTaskparameter", JSON.stringify(addpayheadparameter));
        // alert(addcostcatparameter + "json");
        debugger
        $.ajax
            ({
                type: 'POST',
                url: URLPowerAPI+'/api/PBXMLActivities/AddPBXMLActivities',
                dataType: 'JSON',
                data: JSON.stringify(addpayheadparameter),

                contentType: 'application/json ; charset = utf-8',

                success: function (data, textStatus, xhr) {

                    alert('Customer registered successfully');
                    window.location.href = "LLLL-CR-ST-50.shtml";
                },
                error: function (xhr, textStatus, errorThrown) {
                    alert("You entered some invalid fields...! Fill the details again...");
                }
            });

        return;

    });

    $("#updatebtnID").click(function () {
        debugger
        var addpayheadparameter = payheadfunction();
        localStorage.setItem("updateTaskparameter", JSON.stringify(addpayheadparameter));
        $.ajax
            ({
                type: 'POST',
                url: URLPowerAPI+'/api/PBXMLActivities/EditPBXMLActivities',
                dataType: 'JSON',
                data: JSON.stringify(addpayheadparameter),
                contentType: 'application/json ; charset = utf-8',

                success: function (data, textStatus, xhr) {
                    alert('Customer registered successfully');
                    window.location.href = "LLLL-CR-ST-50.shtml";
                },
                error: function (xhr, textStatus, errorThrown) {
                    alert("You entered some invalid fields...! Fill the details again...");
                }
            });
        return;

    });
</script>

<!--GET API-->
<script>
    $(document).ready(function () {
        debugger
        var url1 = window.location.href;
        var mode = url1.split("=")[2];
        var Id1 = url1.split("=")[1];
        var index = (Id1).indexOf('&');
        var Id = Id1.substring(0, index);
        var cccd = localStorage.getItem('CCAC');
        //alert(mode);
        //alert(Id);

        if (mode == 'edit') {
            $.ajax({
                type: 'GET',
                url: URLPowerAPI+'/api/PBXMLActivities/GetPBXMLActivitiesByID',
                dataType: 'JSON',
                contentType: 'application/json ; charset = utf-8',
                //data: JSON.stringify(groupname),
                data: {
                    cccd: cccd,
                    ActivityNo: Id
                },

                contentType: 'application/json ; charset = utf-8',
                success: function (data) {
                    alert(JSON.stringify(data));
                    data = data;
                 
                  
                    var duedate2 = data.DueDate
                    var index = (duedate2).indexOf('T');
                    var duedate1 = duedate2.substring(0, index);
                    //var CallStartTime = data.DueDate;
                    alert(duedate1)
                    var year = duedate1.substring(0, 4);
                    alert(year)
                    var mon = duedate1.split("-")[1];
                    alert(mon)
                    var day = duedate1.split("-")[2];
                    alert(day)

                    var duedate= mon + "/" + day + "/" + year;
                    alert(duedate)


                    alert(data.SendNoficatnEmail + "result")
                  

                    if (data.SendNoficatnEmail == 'True') {
                        $("#SendNoEmailID").attr('checked', 'checked');
                    }

                  

                    $("#TaskSubId").val(data.Subject);
                    $("#TaskDateId").val(duedate);

                    $('#TaskConNameId option:selected').text(data.ContactPersonName);
                    $('#TaskConNameId option:selected').val(data.ContactPersonName);

                    $('#RelatedToId option:selected').text(data.AccountOptionName);
                    $('#RelatedToId option:selected').val(data.AccountOptionName);

                    $('#RelatedValueId option:selected').text(data.RelatedToName);
                  //  $('#RelatedValueId option:selected').val(data.RelatedToName);
                    $('#StatusId option:selected').text(data.StatusName);
                    $('#StatusId option:selected').val(data.StatusName);

                    $('#PriorityId option:selected').text(data.PriorityName);
                    $('#PriorityId option:selected').val(data.PriorityName);
                    // $('#PayHeadUseOfGratuityId option:selected').text(data.StatusName);
                    $('#TaskLedNameId option:selected').text(data.ContactLead);
                   
                    $("#TaskDesc").val(data.Description);
                    if (data.RecurringActivity == 'True') {
                        $("#RecActivityID").attr('checked', 'checked');
                    }

                    //$("#RecActStartdateId").val(CallStartTime1);
                    //$("#RecActEnddateId").val(CallEndTime1);
                    //$('#RepeattypeId option:selected').text(data.StatusName);
                    sessionStorage.setItem('uid', data.UID);
                    // alert(data.UID+"uid");
                    sessionStorage.setItem('username', data.USERNAME);
                    sessionStorage.setItem('createdsystem', data.CREATEDSYSTEM);
                    sessionStorage.setItem('createddate', data.CREATEDDATE);
                    sessionStorage.setItem('lastupdatedate', data.LASTUPDATEDDATE);




                },

            });


        }

        $("#deletebtnID").show();
        $("#updatebtnID").show();




        $("#deletebtnID").click(function () {
            var url1 = window.location.href;
            var mode = url1.split("=")[2];
            var Id1 = url1.split("=")[1];
            var index = (Id1).indexOf('&');
            var Id = Id1.substring(0, index);
            var cccd = localStorage.getItem('CCAC');
            $.ajax({
                url: URLPowerAPI+'/api/PBXMLActivities/DeletePBXMLActivities',
                type: 'GET',
                dataType: 'JSON',
                data: {
                    cccd: cccd,
                    ActivityNo: Id

                },

                contentType: 'application/json ; charset = utf-8',
                success: function (data, textStatus, xhr) {
                    alert("PBXMLCostcategory deleted successfully");
                    window.location.href = "LLLL-CR-ST-50.shtml";

                },
                error: function (xhr, textStatus, errorThrown) {
                    alert("You entered wrong password...! Fill the details again...");
                }
            });
        });
    });

        function set_MainHeaderName() {
            $('#MainPHead_Name').html('<i class="icon-arrow-left52 mr-2"></i> <span class="font-weight-semibold" id="main_id">CRM</span> - Activities - Schedule Task');
            $('#MainPHead_Name1').html('<a href="#" class="breadcrumb-item"><i class="icon-home2 mr-2"></i>CRM</a><span class="breadcrumb-item active">Activities / Schedule Task</span>');
        }
</script>

